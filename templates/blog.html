<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>{{ blog.meta.title }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{{ blog.meta.description }}">

    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&family=JetBrains+Mono:wght@400&display=swap"
        rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark-dimmed.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --font-geist: 'Geist', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;

            /* Fluid Typography Scale - Smooth scaling for all devices */
            --text-base: clamp(1rem, 0.9rem + 0.3vw, 1.125rem);
            --text-h1: clamp(2rem, 6vw, 3.5rem);
            --text-h2: clamp(1.4rem, 4vw, 2rem);
            --text-h3: clamp(1.1rem, 2.5vw, 1.5rem);
        }

        body {
            font-family: var(--font-geist);
            background-color: #ffffff;
            color: #111;
            -webkit-font-smoothing: antialiased;
            line-height: 1.6;
        }

        /* Reading constraints for premium feel */
        .prose {
            max-width: 68ch !important;
            font-size: var(--text-base);
            color: #3f3f46;
        }

        .prose h1 {
            font-size: var(--text-h1);
            font-weight: 700;
            letter-spacing: -0.04em;
            color: #000;
            margin-top: 2.5rem;
        }

        .prose h2 {
            font-size: var(--text-h2);
            font-weight: 600;
            letter-spacing: -0.02em;
            color: #000;
            margin-top: 2rem;
        }

        .prose h3 {
            font-size: var(--text-h3);
            font-weight: 600;
            color: #000;
        }

        /* Unified Code Block Style */
        .code-block-wrapper {
            margin: 2.5rem 0;
            border: 1px solid #e4e4e7;
            border-radius: 12px;
            overflow: hidden;
            background: #1c2128;
        }

        .code-block-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.6rem 1.2rem;
            background: #22272e;
            border-bottom: 1px solid #373e47;
        }

        .code-block-header span {
            font-family: var(--font-mono);
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: #768390;
        }

        .prose pre {
            margin: 0 !important;
            border-radius: 0 !important;
            padding: 1.5rem !important;
            background: transparent !important;
            font-size: 0.9rem !important;
            overflow-x: auto;
        }

        #progress-bar {
            height: 2px;
            background: #000;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 100;
            transition: width 0.1s linear;
        }

        .nav-blur {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: saturate(180%) blur(12px);
        }
    </style>
</head>

<body class="min-h-screen">

    <div id="progress-bar" style="width: 0%"></div>

    <nav class="sticky top-0 z-50 border-b border-zinc-100 nav-blur">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <a href="/" class="flex items-center transition-opacity hover:opacity-70">
                <span class="font-bold text-lg tracking-tighter text-zinc-900">{{PlatformName}}</span>
            </a>

            <div class="flex items-center gap-8 text-sm font-medium">
                <!-- for future  use  -->
                <!-- <a href="#" class="text-zinc-500 hover:text-black transition-colors">Archive</a> -->
                <a href="#"
                    class="bg-zinc-900 text-white px-4 py-2 rounded-full text-xs font-semibold hover:bg-black transition-all">Subscribe</a>
            </div>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-12 lg:py-20">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 lg:gap-20">

            <div class="lg:col-span-8">
                <header class="mb-12">
                    <div class="flex items-center gap-1 text-xs  tracking-widest uppercase text-zinc-400 mb-6">
                        <span class="text-zinc-900">Articles</span>
                        <span>/</span>
                        <time>{{ blog.meta.updated_at.strftime("%B %d, %Y") }}</time>
                        <span>/</span>
                        <span id="readTime">... min read</span>
                    </div>

                    <h1 class="text-[var(--text-h1)] font-bold text-zinc-900 leading-[1.1] tracking-tighter mb-10">
                        {{ blog.meta.title }}
                    </h1>

                    <div class="flex items-center gap-4 py-6 border-y border-zinc-100">
                        <div
                            class="w-10 h-10 rounded-full bg-zinc-100 flex items-center justify-center border border-zinc-200">
                            <i data-lucide="user" class="w-5 h-5 text-zinc-400"></i>
                        </div>
                        <div>
                            <p class="text-sm font-bold text-zinc-900">{{ blog.meta.author.name }}</p>
                            <!-- <p class="text-xs text-zinc-500">Founder</p> -->
                        </div>
                    </div>
                </header>

                {% if blog.meta.thumbnail_url %}
                <div class="mb-16 rounded-2xl overflow-hidden border border-zinc-100 shadow-sm">
                    <img src="{{ blog.meta.thumbnail_url }}" alt="Cover" class="w-full aspect-video object-cover">
                </div>
                {% endif %}

                <article id="content"
                    class="prose prose-zinc prose-headings:text-zinc-900 prose-a:text-zinc-900 prose-a:underline prose-a:underline-offset-4 prose-img:rounded-xl">
                </article>
            </div>

            <aside class="lg:col-span-4 lg:border-l lg:border-zinc-100 lg:pl-12">
                <div class="sticky top-28 space-y-16">

                    <section>
                        <h3 class="text-[11px] font-bold uppercase tracking-[0.2em] text-zinc-400 mb-8">Recent Stories
                        </h3>
                        <div class="space-y-10">
                            {% for b in blogs[:4] %}
                            <a href="/blog/{{ b.slug }}" class="group flex items-start gap-4">
                                <div
                                    class="w-16 h-16 shrink-0 rounded-lg overflow-hidden border border-zinc-100 bg-zinc-50 transition-transform group-hover:scale-105 duration-300">
                                    {% if b.thumbnail_url %}
                                    <img src="{{ b.thumbnail_url }}" alt="{{ b.title }}"
                                        class="w-full h-full object-cover grayscale-[0.5] group-hover:grayscale-0">
                                    {% else %}
                                    <div class="w-full h-full flex items-center justify-center bg-zinc-50">
                                        <i data-lucide="image" class="w-4 h-4 text-zinc-300"></i>
                                    </div>
                                    {% endif %}
                                </div>
                                <div class="flex-1 min-w-0">
                                    <h4
                                        class="text-sm font-bold text-zinc-900 group-hover:text-zinc-500 transition-colors leading-tight mb-1 line-clamp-2">
                                        {{ b.title }}
                                    </h4>
                                    <time class="text-[10px] font-medium text-zinc-400 uppercase tracking-wider">{{
                                        b.updated_at.strftime("%b %d, %Y") }}</time>
                                </div>
                            </a>
                            {% endfor %}
                        </div>
                    </section>

                    <section class="p-8 bg-zinc-50 rounded-2xl border border-zinc-100">
                        <h3 class="text-sm font-bold text-zinc-900 mb-3">Newsletter</h3>
                        <p class="text-xs text-zinc-500 leading-relaxed mb-6">
                            Join our community of developers and designers for high-quality insights every Tuesday.
                        </p>
                        <div class="space-y-3">
                            <input type="email" placeholder="Email address"
                                class="w-full bg-white border border-zinc-200 rounded-lg px-4 py-2 text-xs focus:ring-1 ring-black outline-none transition-all">
                            <button
                                class="w-full bg-zinc-900 text-white text-xs font-bold py-2.5 rounded-lg hover:bg-black transition-all">Sign
                                Up</button>
                        </div>
                    </section>

                </div>
            </aside>
        </div>
    </main>

    <footer class="py-20 border-t border-zinc-100 mt-20 bg-zinc-50/50">
        <div class="max-w-7xl mx-auto px-6 flex flex-col items-center gap-6">
            <span class="text-[11px] font-bold  tracking-[0.3em] text-zinc-400">Â© 2026 {{PlatformName}} .</span>
        </div>
    </footer>

    <script>
        // Markdown Engine & Code Block Logic
        const contentContainer = document.getElementById('content');
        const rawMarkdown = {{ blog.content | tojson }};

        marked.use({ gfm: true, breaks: true });

        if (contentContainer && rawMarkdown) {
            contentContainer.innerHTML = marked.parse(rawMarkdown);

            contentContainer.querySelectorAll('pre code').forEach((el) => {
                hljs.highlightElement(el);
                const pre = el.parentElement;
                const lang = Array.from(el.classList).find(c => c.startsWith('language-'))?.split('-')[1] || 'code';

                const wrapper = document.createElement('div');
                wrapper.className = 'code-block-wrapper';

                wrapper.innerHTML = `
                    <div class="code-block-header">
                        <span>${lang}</span>
                        <button class="copy-btn text-zinc-500 hover:text-white transition-colors" onclick="copyCode(this)">
                            <i data-lucide="copy" class="w-3.5 h-3.5"></i>
                        </button>
                    </div>
                `;

                pre.parentNode.insertBefore(wrapper, pre);
                wrapper.appendChild(pre);
            });
            MathJax.typesetPromise();
        }

        // Global Utility: Copy Code
        window.copyCode = (btn) => {
            const code = btn.closest('.code-block-wrapper').querySelector('code').innerText;
            navigator.clipboard.writeText(code).then(() => {
                btn.innerHTML = `<i data-lucide="check" class="w-3.5 h-3.5 text-green-500"></i>`;
                lucide.createIcons();
                setTimeout(() => {
                    btn.innerHTML = `<i data-lucide="copy" class="w-3.5 h-3.5"></i>`;
                    lucide.createIcons();
                }, 2000);
            });
        };

        // UI: Dynamic Read Time
        const text = contentContainer.innerText;
        const wpm = 225;
        const words = text.trim().split(/\s+/).length;
        document.getElementById('readTime').innerText = `${Math.ceil(words / wpm)} min read`;

        // Scroll Progress
        window.addEventListener('scroll', () => {
            const scroll = document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            document.getElementById("progress-bar").style.width = (scroll / height) * 100 + "%";
        });

        lucide.createIcons();
    </script>
</body>

</html>